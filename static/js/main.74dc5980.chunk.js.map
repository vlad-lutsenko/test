{"version":3,"sources":["components/InputForm/InputForm.module.css","components/Loader/Loader.module.css","components/Modal/Modal.module.css","components/ImageExtended/ImageExtended.module.css","components/ImageGallery/ImageGallery.module.css","fetchRequest/index.js","components/InputForm/InputForm.js","components/ImageExtended/ImageExtended.js","components/Modal/Modal.js","components/Loader/Loader.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["module","exports","axios","defaults","baseURL","getImageExtendedComments","image_id","get","InputForm","imgId","imageComments","useState","response","setResponse","changeHandler","e","target","name","value","onSubmit","comment","preventDefault","post","push","reset","className","styles","form","type","placeholder","onChange","required","submitButton","ImageExtended","imageSrc","closeModal","console","log","setImgId","modal","src","alt","bigImg","comments","commentsList","length","map","description","id","commentsListItem","closeButton","onClick","Modal","children","escCloseModal","key","useEffect","window","addEventListener","removeEventListener","Overlay","options","lines","width","radius","scale","corners","color","opacity","rotate","direction","speed","trail","fps","zIndex","top","left","shadow","hwaccel","position","Loading","loaded","ImageGallery","images","imageExtendedSrc","setImageExtendedSrc","imageExtendedComments","setImageExtendedComments","showModal","setShowModal","loading","setLoading","loadImageInfo","a","source","data","Loader","wrapper","title","imagesGallery","imageContainer","image","footer","footerText","App","setImages","isLoading","setIsLoading","fetchRequest","app","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.74dc5980.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"InputForm_form__blOUZ\",\"submitButton\":\"InputForm_submitButton__Rykt_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Loader_Overlay__3ugmI\",\"Modal\":\"Loader_Modal__2v-rt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__gt5KT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"ImageExtended_modal__2gwEN\",\"bigImg\":\"ImageExtended_bigImg__1medA\",\"commentsList\":\"ImageExtended_commentsList__1kGkX\",\"commentsListItem\":\"ImageExtended_commentsListItem__SoeHu\",\"closeButton\":\"ImageExtended_closeButton__1D_7Z\",\"name\":\"ImageExtended_name__Miire\",\"description\":\"ImageExtended_description__2Tg9k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ImageGallery_wrapper__3zGri\",\"title\":\"ImageGallery_title__3NvGh\",\"imagesGallery\":\"ImageGallery_imagesGallery__2zp2c\",\"imageContainer\":\"ImageGallery_imageContainer__ASwxY\",\"image\":\"ImageGallery_image__26jg0\",\"footer\":\"ImageGallery_footer__2uhfK\",\"footerText\":\"ImageGallery_footerText__3hzYV\",\"noScroll\":\"ImageGallery_noScroll__O3v8D\"};","import axios from \"axios\";\r\n\r\naxios.defaults.baseURL = \"https://tzfrontend.herokuapp.com/\";\r\n\r\nexport const getAllImages = () => axios.get(\"images/\");\r\nexport const getImageExtendedSrc = (image_id) =>\r\n  axios.get(`images/${image_id}`);\r\nexport const getImageExtendedComments = (image_id) =>\r\n  axios.get(`comments/${image_id}`);\r\nexport const addImageComment = (comment) =>\r\n  axios.post(\"comments/add/\", comment);\r\n","import React, { useState } from \"react\";\r\nimport { addImageComment } from \"../../fetchRequest\";\r\nimport styles from \"./InputForm.module.css\";\r\n\r\nconst InputForm = ({ imgId, imageComments }) => {\r\n  const [response, setResponse] = useState({ image_id: imgId });\r\n\r\n  const changeHandler = (e) => {\r\n    const { name, value } = e.target;\r\n    setResponse({ ...response, [name]: value });\r\n  };\r\n\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    addImageComment(response);\r\n    imageComments.push(response);\r\n    e.target.reset();\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={submitHandler} className={styles.form}>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Ваше имя\"\r\n        name=\"name\"\r\n        onChange={changeHandler}\r\n        required\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        name=\"description\"\r\n        onChange={changeHandler}\r\n        placeholder=\"Ваш комментарий\"\r\n        required\r\n      />\r\n      <button className={styles.submitButton}>Оставить комментарий</button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default InputForm;\r\n","import React, { useState } from \"react\";\r\nimport InputForm from \"../InputForm/InputForm\";\r\nimport styles from \"./ImageExtended.module.css\";\r\n\r\nconst ImageExtended = ({ imageSrc, imageComments, closeModal }) => {\r\n  console.log(imageComments);\r\n  const [imgId, setImgId] = useState(\"\");\r\n\r\n  return (\r\n    <div className={styles.modal}>\r\n      <div>\r\n        <img src={imageSrc} alt=\"awesome\" className={styles.bigImg} />\r\n      </div>\r\n      <div className={styles.comments}>\r\n        <ul className={styles.commentsList}>\r\n          {!!imageComments.length &&\r\n            imageComments.map((comment) => {\r\n              const { description, id, name, image_id } = comment;\r\n              if (imgId !== image_id) {\r\n                setImgId(image_id);\r\n              }\r\n              return (\r\n                <li key={id} className={styles.commentsListItem}>\r\n                  <p className={styles.name}>{name}</p>\r\n                  <p className={styles.description}>{description}</p>\r\n                </li>\r\n              );\r\n            })}\r\n          {!imageComments.length && (\r\n            <li className={styles.commentsListItem}>\r\n              <p className={styles.description}>Ваш комментарий будет первым</p>\r\n            </li>\r\n          )}\r\n        </ul>\r\n      </div>\r\n      <InputForm imgId={imgId} imageComments={imageComments} />\r\n      <button className={styles.closeButton} onClick={closeModal}>\r\n        &#10006;\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageExtended;\r\n","import React, { useEffect } from \"react\";\r\nimport styles from \"./Modal.module.css\";\r\n\r\nconst Modal = ({ closeModal, children }) => {\r\n  const escCloseModal = (e) => {\r\n    if (e.key !== \"Escape\") {\r\n      return;\r\n    }\r\n    closeModal();\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"keydown\", escCloseModal);\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", escCloseModal);\r\n    };\r\n  });\r\n\r\n  return (\r\n    <div className={styles.Overlay}>\r\n      <>{children}</>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React from \"react\";\r\nimport Loader from \"react-loader\";\r\n\r\nimport styles from \"./Loader.module.css\";\r\n\r\nconst options = {\r\n  lines: 13,\r\n  length: 20,\r\n  width: 10,\r\n  radius: 30,\r\n  scale: 1.0,\r\n  corners: 1,\r\n  color: \"#F0FFFF\",\r\n  opacity: 0.25,\r\n  rotate: 0,\r\n  direction: 1,\r\n  speed: 1,\r\n  trail: 60,\r\n  fps: 20,\r\n  zIndex: 2e9,\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  shadow: false,\r\n  hwaccel: false,\r\n  position: \"absolute\",\r\n};\r\n\r\nconst Loading = () => {\r\n  return (\r\n    <div className={styles.Overlay}>\r\n      <div className={styles.Modal}>\r\n        <Loader loaded={false} options={options} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  getImageExtendedComments,\r\n  getImageExtendedSrc,\r\n} from \"../../fetchRequest\";\r\nimport ImageExtended from \"../ImageExtended/ImageExtended\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport Loader from \"../Loader/Loader\";\r\n\r\nimport styles from \"./ImageGallery.module.css\";\r\n\r\nconst ImageGallery = ({ images }) => {\r\n  const [imageExtendedSrc, setImageExtendedSrc] = useState(\"\");\r\n  const [imageExtendedComments, setImageExtendedComments] = useState({});\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const openModal = () => setShowModal(true);\r\n  const closeModal = () => setShowModal(false);\r\n\r\n  const loadImageInfo = async (id) => {\r\n    setLoading(true);\r\n    const source = await getImageExtendedSrc(id);\r\n    setImageExtendedSrc(source.data.src);\r\n    const comments = await getImageExtendedComments(id);\r\n    setImageExtendedComments(comments.data);\r\n    openModal();\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {loading && <Loader />}\r\n      <div className={styles.wrapper}>\r\n        <h1 className={styles.title}>test app</h1>\r\n        <div className={styles.imagesGallery}>\r\n          {images.map(({ image_id, src }) => (\r\n            <div\r\n              className={styles.imageContainer}\r\n              key={image_id}\r\n              onClick={() => loadImageInfo(image_id)}\r\n            >\r\n              <img src={src} alt={image_id} className={styles.image} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {showModal && (\r\n          <Modal closeModal={closeModal}>\r\n            <ImageExtended\r\n              imageSrc={imageExtendedSrc}\r\n              imageComments={imageExtendedComments}\r\n              closeModal={closeModal}\r\n            />\r\n          </Modal>\r\n        )}\r\n        <footer className={styles.footer}>\r\n          <p className={styles.footerText}>© 2018-2019</p>\r\n        </footer>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React, { useEffect, useState } from \"react\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\nimport Loader from \"./components/Loader/Loader\";\n\nimport { getAllImages } from \"./fetchRequest\";\n\nimport styles from \"./components/ImageGallery/ImageGallery.module.css\";\n\nconst App = () => {\n  const [images, setImages] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    if (!images.length) {\n      async function fetchRequest() {\n        const response = await getAllImages();\n        setImages(response.data);\n        setIsLoading(false);\n      }\n      fetchRequest();\n    }\n  });\n\n  return (\n    <div className={styles.app}>\n      {isLoading && <Loader />}\n      {!!images.length && !isLoading && <ImageGallery images={images} />}\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}